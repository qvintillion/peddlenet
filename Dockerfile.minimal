# Minimal Dockerfile for immediate deployment
FROM node:18-alpine

WORKDIR /app

# Copy package.json from root (has all dependencies)
COPY package.json package-lock.json ./

# Install only production dependencies 
RUN npm ci --only=production && npm cache clean --force

# Copy the fixed production server with messaging fix (no SQLite dependencies)
COPY signaling-server-production-FIXED.js ./server.js

# Expose port
EXPOSE 3001

# Start server
CMD ["node", "server.js"]
